<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8">
Â  <title>WeatherIQ</title>
Â  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"Â rel="stylesheet">Â 
Â 
Â  <style>
Â Â Â  body { background: #eef6f9; display: flex; flex-direction: column; min-height: 100vh; }
Â Â Â  .card { margin: 10px 0; border-radius: 15px; }
Â Â Â  .weather-icon { width: 60px; }
Â Â Â  .risk { font-weight: bold; }
Â Â Â  footer { margin-top: auto; background: transparent; }
Â Â Â  .small-risk { font-size: 0.85rem; }
Â  </style>
</head>
<body>
<div class="container py-4">
Â  <h2 class="text-center mb-4">ğŸŒ¦Â WeatherIQ</h2>
Â 
Â  <!-- Responsive input box -->
Â  <div class="row justify-content-center mb-3">
Â Â Â  <div class="col-12 col-md-6">
Â Â Â Â Â  <div class="input-group">
Â Â Â Â Â Â Â  <input type="text" id="cityInput" class="form-control"
Â Â Â Â Â Â Â Â Â Â Â Â Â Â  placeholder="Enter city name" list="cityList"
Â Â Â Â Â Â Â Â Â Â Â Â Â Â  oninput="fetchCitySuggestions(this.value)">
Â Â Â Â Â Â Â  <datalist id="cityList"></datalist>
Â Â Â Â Â Â Â  <button class="btn btn-primary" onclick="getWeather()">Get Weather</button>
Â Â Â Â Â  </div>
Â Â Â  </div>
Â  </div>
Â 
Â  <div id="weatherResult"></div>
</div>
Â 
<!-- Transparent Footer -->
<footer class="text-center py-3">
Â  <small>Â© 2025 WeatherIQ | Powered by OpenWeatherMap</small>
</footer>
Â 
<script>
const apiKey = "1af3b1a4f3e14c38dd385f5c9b09d4c0"; // ğŸ”‘Â Replace with your OpenWeatherMap API key
Â 
// Fetch city suggestions
async function fetchCitySuggestions(query) {
Â  if (query.length < 3) return;
Â  try {
Â Â Â  const url = `https://api.openweathermap.org/geo/1.0/direct?q=${query}&limit=5&appid=${apiKey}`;
Â Â Â  const res = await fetch(url);
Â Â Â  const cities = await res.json();
Â 
Â Â Â  let options = "";
Â Â Â  cities.forEach(city => {
Â Â Â Â Â  options += `<option value="${city.name}, ${city.country}">`;
Â Â Â  });
Â Â Â  document.getElementById("cityList").innerHTML = options;
Â  } catch (err) {
Â Â Â  console.error("City autocomplete error:", err);
Â  }
}
Â 
// Fetch weather data
async function getWeather() {
Â  const city = document.getElementById("cityInput").value;
Â  if (!city) return alert("Please enter a city");
Â 
Â  const currentUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;
Â  const forecastUrl = `https://api.openweathermap.org/data/2.5/forecast?q=${city}&appid=${apiKey}&units=metric`;
Â 
Â  try {
Â Â Â  const [currentRes, forecastRes] = await Promise.all([
Â Â Â Â Â  fetch(currentUrl),
Â Â Â Â Â  fetch(forecastUrl)
Â Â Â  ]);
Â 
Â Â Â  const currentData = await currentRes.json();
Â Â Â  const forecastData = await forecastRes.json();
Â 
Â Â Â  displayWeather(currentData, forecastData);
Â  } catch (err) {
Â Â Â  console.error(err);
Â Â Â  alert("Error fetching weather data");
Â  }
}
Â 
// Risk calculation per day
function calculateRisksForDay(dayForecasts) {
Â  const totalRain = dayForecasts.reduce((acc, f) => acc + (f.rain ? f.rain["3h"] || 0 : 0), 0);
Â 
Â  let risks = [];
Â  let color = "success";
Â 
Â  if (totalRain > 50) {
Â Â Â  color = "danger";
Â Â Â  risks.push({ msg: "âš ï¸Â High flood risk", color });
Â Â Â  risks.push({ msg: "âš ï¸Â Landslide possible in hilly areas", color });
Â Â Â  risks.push({ msg: "âš ï¸Â Cloudburst risk due to heavy rain", color });
Â  } else if (totalRain > 20) {
Â Â Â  color = "warning";
Â Â Â  risks.push({ msg: "âš ï¸Â Moderate flood risk", color });
Â  } else if (totalRain > 5) {
Â Â Â  color = "info";
Â Â Â  risks.push({ msg: "ğŸŒ§Â Light rain expected", color });
Â  } else {
Â Â Â  color = "success";
Â Â Â  risks.push({ msg: "âœ…Â No major risks", color });
Â  }
Â 
Â  return { totalRain, color, risks };
}
Â 
// Display weather
function displayWeather(current, forecast) {
Â  if (current.cod !== 200) {
Â Â Â  document.getElementById("weatherResult").innerHTML = `<div class="alert alert-danger">${current.message}</div>`;
Â Â Â  return;
Â  }
Â 
Â  // Group forecasts by date
Â  const forecastByDate = {};
Â  forecast.list.forEach(f => {
Â Â Â  const date = f.dt_txt.split(" ")[0];
Â Â Â  if (!forecastByDate[date]) forecastByDate[date] = [];
Â Â Â  forecastByDate[date].push(f);
Â  });
Â 
Â  // Todayâ€™s risks
Â  const today = new Date().toISOString().split("T")[0];
Â  const todayRisks = calculateRisksForDay(forecastByDate[today] || []);
Â 
Â  let html = `
Â Â Â  <div class="card p-3 shadow-sm">
Â Â Â Â Â  <div class="d-flex align-items-center">
Â Â Â Â Â Â Â  <div class="me-3">
Â Â Â Â Â Â Â Â Â  <img class="weather-icon" src=http://openweathermap.org/img/wn/${current.weather[0].icon}@2x.pngÂ alt="icon">
Â Â Â Â Â Â Â  </div>
Â Â Â Â Â Â Â  <div>
Â Â Â Â Â Â Â Â Â  <h4>${current.name}, ${current.sys.country}</h4>
Â Â Â Â Â Â Â Â Â  <p><b>${current.main.temp}Â°C</b>, ${current.weather[0].description}</p>
Â Â Â Â Â Â Â Â Â  <p>Humidity: ${current.main.humidity}% | Wind: ${current.wind.speed} m/s</p>
Â Â Â Â Â Â Â  </div>
Â Â Â Â Â  </div>
Â Â Â Â Â  <div class="mt-3">
Â Â Â Â Â Â Â  <h5>ğŸŒÂ Risk Alerts (Today)</h5>
Â Â Â Â Â Â Â  ${todayRisks.risks.map(r => `<div class="alert alert-${r.color} risk">${r.msg}</div>`).join("")}
Â Â Â Â Â  </div>
Â Â Â  </div>
Â  `;
Â 
Â  // Hourly Forecast (next 24h)
Â  html += `<h5 class="mt-4">â°Â Hourly Forecast (Next 24h)</h5><div class="row">`;
Â  forecast.list.slice(0, 8).forEach(f => {
Â Â Â  html += `
Â Â Â Â Â  <div class="col-6 col-md-3">
Â Â Â Â Â Â Â  <div class="card p-2 text-center shadow-sm">
Â Â Â Â Â Â Â Â Â  <p><b>${new Date(f.dt_txt).getHours()}:00</b></p>
Â Â Â Â Â Â Â Â Â  <img class="weather-icon" src=http://openweathermap.org/img/wn/${f.weather[0].icon}.png>
Â Â Â Â Â Â Â Â Â  <p>${f.main.temp}Â°C</p>
Â Â Â Â Â Â Â Â Â  <p>${f.weather[0].main}</p>
Â Â Â Â Â Â Â  </div>
Â Â Â Â Â  </div>
Â Â Â  `;
Â  });
Â  html += `</div>`;
Â 
Â  // 5-day Forecast with risks
Â  html += `<h5 class="mt-4">ğŸ“…Â 5-Day Forecast & Risk Predictions</h5><div class="row">`;
Â  const daily = Object.entries(forecastByDate).slice(0, 5);
Â 
Â  daily.forEach(([date, dayForecasts]) => {
Â Â Â  const d = new Date(date);
Â Â Â  const { risks } = calculateRisksForDay(dayForecasts);
Â Â Â  const midday = dayForecasts.find(f => f.dt_txt.includes("12:00:00")) || dayForecasts[0];
Â 
Â Â Â  html += `
Â Â Â Â Â  <div class="col-12 col-md-4 col-lg-2">
Â Â Â Â Â Â Â  <div class="card p-2 text-center shadow-sm">
Â Â Â Â Â Â Â Â Â  <p><b>${d.toDateString()}</b></p>
Â Â Â Â Â Â Â Â Â  <img class="weather-icon" src=http://openweathermap.org/img/wn/${midday.weather[0].icon}.png>
Â Â Â Â Â Â Â Â Â  <p>${midday.main.temp}Â°C</p>
Â Â Â Â Â Â Â Â Â  <p>${midday.weather[0].main}</p>
Â Â Â Â Â Â Â Â Â  <div class="mt-2">
Â Â Â Â Â Â Â Â Â Â Â  ${risks.map(r => `<div class="alert alert-${r.color} small-risk">${r.msg}</div>`).join("")}
Â Â Â Â Â Â Â Â Â  </div>
Â Â Â Â Â Â Â  </div>
Â Â Â Â Â  </div>
Â Â Â  `;
Â  });
Â  html += `</div>`;
Â 
Â  document.getElementById("weatherResult").innerHTML = html;
}
</script>
</body>
</html>
